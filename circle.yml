general:
  branches:
    ignore:
      - release # dont build release branch.

machine:
  python:
    version: 2.7.3 # Python is used to install awscli.
  node:
    version: 5.1.0
  services:
    - docker
    
checkout:
  post:
    - ./pipeline.sh start || ./pipeline.sh fail

dependencies:
  pre:
    - pip install awscli
    - ./pipeline.sh deploy || ./pipeline.sh fail

test:
  override:
    - ./pipeline.sh run-tests dev || ./pipeline.sh fail

deployment:
  awslambda:
    branch: master
    commands:
      - ./pipeline.sh finish || ./pipeline.sh fail

